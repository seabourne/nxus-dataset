<!-- admin-dataset-form.ejs -->
<% if (inst.id && actions) { %>
<div class="row">
  <div class="col-md-12">
  <% actions.forEach(function(action) { %>
    <% if(req.path != base+"/"+inst.id+"/"+action.subURL) { %>
    <a class="btn btn-primary" href="<%= base %>/<%=inst.id%>/<%= action.subURL %>"><i class="<%= action.iconClass %>"></i> <%= action.label %><%if (action.suffixName) { %> <%=name%><%}%></a>
    <% } %>
  <% }) %>
  <hr />
  </div>
</div>
<% } %>

  <div class="row">
  <form action="dataset/save" method="POST" class="form-horizontal" >
    <input type="hidden" name="id" value="<%- dataset.id %>"/>
    <div class="form-body">
      <div class="form-group">
        <label for="dataset.name" class="col-sm-2 control-label">Name</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" name="name" id="dataset.name" required value="<%- dataset.name %>" />
        </div>
      </div>
      <div class="form-group">
        <label for="dataset.source" class="col-sm-2 control-label">Source</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" name="source" id="dataset.source" value="<%- dataset.source %>" />
        </div>
      </div>
      <div class="form-group">
        <label for="dataset.description" class="col-sm-2 control-label">Description</label>
        <div class="col-sm-10">
          <textarea cols="5" class="form-control" name="description" id="dataset.description" ><%- dataset.description %></textarea>
        </div>
      </div>
      <%
      if (dataset.fields) {
      %>
      <div class="form-group">
        <div class="row">
          <div class="col-sm-offset-1 col-md-12">
            <h3>Fields</h3>
          </div>
        <% 
        var k = 0;
        dataset.fields.forEach( (field) => { 
        %>
          
            <div class="col-sm-offset-1 col-md-12">
              <b>Field Name:</b> <%- field.name %>
              <b>id:</b> <%- field.id %>
            </div>
          </div>
          <div class="row">
        <%
          _.each(field, (value, key) => {
            if ( 'id' != key && 'name' != key ) {
        %>
          <!-- TODO: make the 'type' field a <select> with options from models/modelConstants -->
            <div class="form-group">
              <label for="dataset.field[<%- k %>].<%- key %>" class="col-sm-2 control-label"><%- key %></label>
              <div class="col-sm-10">
                <input type="text" class="form-control" name="field_<%- field.id %>_<%- key %>" id="dataset.field[<%- k %>].<%- key %>" value="<%- value %>" />
              </div>
            </div>
          <% 
            }
          }) 
          k++; 
          %>

        <% }) %>
        </div>
      </div>
      <% } %>
    </div>
    <hr class="dotted">
    <div class="col-sm-offset-1 col-sm-7">
      <button class="btn btn-primary" type="submit">Save</button> 
    </div>
  </form>
</div>
